on: 2

jobs:
  build-job:
    docker:
      - image: cibuilds/hugo:0.28
    working_directory: ~/project
    steps:
      - checkout
      - run: 
          name: "Run Hugo"
          command: HUGO_ENV=production hugo -v -s ~/project/
  deploy-job:
    docker: 
      - image: cibuilds/hugo:0.28
    working-directory: ~/project
    steps:
      - checkout
      - run:
          command: |
            git config --global user.email "eduardo.villasenor@dsindigo.mx"
            git config --global user.name "CircleCI"
            git tag -a v2.0
           

workflows:
  version: 2
  build-deploy:
    jobs:
      - build-job
      - deploy-job
